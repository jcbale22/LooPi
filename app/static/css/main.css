/* ====================================================================== */
/*  main.css  –  Global styles & design tokens for LooPi                  */
/* ====================================================================== */

/* ---------- 1. Design tokens (CSS custom properties) ----------------- */
:root {
  --brand-bg-start: #2d6cdf;
  --brand-bg-end:   #1f4ea8;
  --brand-fg:       #ffffff;
  --accent:   #ffca28;
  --radius:   6px;
  --shadow-sm: 0 1px 4px rgba(0, 0, 0, .12);
}

/* ---------- 2. Global reset ------------------------------------------ */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: system-ui,-apple-system,"Segoe UI",sans-serif;
  background: #f5f7fa;
  color: #333;
  line-height: 1.45;
}

button {
  font: inherit;
}

body, input, button, select, textarea {
  font-family: 'Inter', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  font-weight: 500;
  letter-spacing: 0.2px;
  color: #111;
}

/* ---------- 3. Navigation bar ---------------------------------------- */
.navbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 20px; height: 60px;
  background: linear-gradient(120deg, var(--brand-bg-start), var(--brand-bg-end));
  color: var(--brand-fg);
  box-shadow: var(--shadow-sm);
}
.nav-left, .nav-right {
  display: flex; align-items: center; gap: 22px;
}
.logo-avatar {
  width: 72px; height: 72px; border-radius: 50%;
  filter: drop-shadow(0 0 3px rgba(255,255,255,.5));
  transition: filter .2s ease-in-out;
}
.logo-avatar:hover {
  filter: drop-shadow(0 0 8px rgba(255,255,255,.9));
}
.nav-left a,
.nav-right a {
  position: relative;
  color: var(--brand-fg);
  text-decoration: none;
  font-weight: 600;
  padding: 2px 0;
}
.nav-left a::after,
.nav-right a::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -3px;
  width: 0;
  height: 2px;
  background: var(--accent);
  transition: width 0.25s ease;
}
.nav-left a:hover::after,
.nav-right a:hover::after {
  width: 100%;
}
.time-display {
  font-size: 0.95rem;
  font-weight: 500;
  color: var(--brand-fg);
  margin-left: 8px;
  white-space: nowrap;
}

/* ---------- 4. Profile / account dropdown ---------------------------- */
.profile { position: relative; }
.profile-btn {
  display: flex; align-items: center; gap: 8px;
  background: none; border: none; color: inherit; cursor: pointer;
}
.avatar,
.initials-avatar {
  width: 32px; height: 32px; border-radius: 50%;
  border: 2px solid #ffffff33; object-fit: cover;
}
.initials-avatar {
  display: flex; align-items: center; justify-content: center;
  background: #888; color: #fff; font-weight: 600; font-size: 14px;
}
.dropdown {
  position: absolute; right: 0; top: 48px; min-width: 200px;
  background: #fff; color: #333; border: 1px solid #ddd;
  border-radius: var(--radius); box-shadow: 0 4px 12px rgba(0,0,0,.12);
  display: none; flex-direction: column; z-index: 1001;
}
.dropdown a, .dropdown button {
  padding: 10px 14px;
  text-align: left;
  background: none;
  border: none;
  width: 100%;
  cursor: pointer;
  font: inherit;
  color: #333;
  text-decoration: none;
}
.dropdown a:hover, .dropdown button:hover {
  background: #f5f5f5;
  color: #000;
}

/* ---------- 5. Utility classes --------------------------------------- */
.container { width: min(1200px, 96%); margin-inline: auto; }
.card {
  background: white;
  padding: 24px;
  margin: 30px auto;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-width: 900px; 
  display: flex;
  flex-direction: row;
  gap: 20px;
  align-items: flex-start;
}

.form-grid { display: grid; gap: 16px; }
input.readonly {
  border: none; background: transparent; color: #333;
  font-weight: 500; cursor: default; pointer-events: none;
}

.form-grid.tight {
  gap: 4px;
  margin-top: 12px;
}

input.readonly:focus { outline: none; }

/* ---------- 6. Buttons ----------------------------------------------- */
.btn {
  border: none;
  padding: 8px 16px;
  border-radius: var(--radius);
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.btn-primary {
  background: var(--brand-bg-end);
  color: #fff;
}

.btn-primary:hover {
  background: var(--brand-bg-start);
}

.btn-danger {
  background: #dc3545;
  color: white;
}

.btn-danger:hover {
  background: #b91c1c;
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-small {
  font-size: 0.85rem;
  padding: 6px 12px;
}

.btn-primary.btn-small {
  font-size: 0.85rem;
  padding: 6px 12px;
}

.btn-icon[disabled] {
  color: #aaa;
  cursor: not-allowed;
  transform: none;
}


/* ---------- 6b. Disabled + Conditional Buttons ------------------------ */
button:disabled {
  background-color: #444;
  color: #aaa;
  cursor: not-allowed;
}
button.enabled {
  background-color: var(--brand-bg-end);
  color: white;
}

/* ---------- 7. Pills -------------------------------------------------- */
.pill {
  display: inline-block; padding: 5px 12px; margin: 2px;
  font-size: 12px; font-weight: 600; border-radius: 20px; color: #fff;
}
.pill-green { background-color: #28a745; color: white; }
.pill-red { background-color: #dc3545; color: white; }
.pill-yellow { background-color: #ffc107; color: #212529; }

/* ---------- 7b. Device Table Fields (Editable Pills) ------------------ */
.pill-field-wrapper { display: flex; align-items: center; gap: 6px; background: #e9ecef; padding: 4px 10px; border-radius: 20px; max-width: 240px; width: 100%; }
.pill-input { border: none; background: transparent; padding: 4px 0; font-weight: 500; font-size: 0.9rem; width: 100%; }
.pill-input.readonly { pointer-events: none; color: #666; }


/* ---------- 7c. Pill Container (for multi-checkbox playlists) ----------- */
.pill-container {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}

.pill-container label.pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 20px;
  background-color: #ccc;
  color: #fff;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
}

.pill-container input[type="checkbox"] {
  accent-color: white;
  transform: scale(1.1);
  cursor: pointer;
}

/* ---------- 7d. Editable Table Inputs Enhancements ------------------ */
.editable-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 2px 4px;
  background-color: #f9fafb;
  border-radius: var(--radius);
  transition: background 0.2s ease;
}

.editable-wrapper:hover {
  background-color: #f0f4ff;
}

.editable-input {
  text-align: center;
  border: none;
  background: transparent;
  width: 100%;
  font-weight: 500;
  padding: 4px 6px;
}

.edit-icon {
  width: 16px;
  height: 16px;
  opacity: 0.5;
  transition: opacity 0.2s ease;
}

.editable-wrapper:hover .edit-icon {
  opacity: 1;
}

/* ---------- 8. Tables ------------------------------------------------- */
table {
  width: 100%; border-collapse: collapse; background: #fff;
  border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow-sm);
}
th, td { padding: 12px 10px; text-align: center; border-bottom: 1px solid #eee; }
thead th { background: #fafafa; font-weight: 700; }



/* ---------- 10. Messages / Alerts ------------------------------------- */
.message {
  padding: 12px 16px; border-radius: var(--radius);
  font-weight: 600; margin: 12px 0; border: 1px solid;
}
.message.success {
  background: #e8f5e9; color: #2e7d32; border-color: #c8e6c9;
}
.message.error {
  background: #ffebee; color: #c62828; border-color: #ffcdd2;
}

/* ---------- 11. Upload Success Animation ----------------------------- */
.upload-success { text-align: center; padding: 40px 20px; animation: slideIn 0.5s ease-out; }
.success-icon { font-size: 48px; color: #4BB543; margin-bottom: 10px; }
.preview-image { max-width: 280px; max-height: 280px; margin-top: 20px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.redirect-note { font-size: 14px; color: #666; margin-top: 30px; }
.pill-group { margin: 10px 0; }
@keyframes slideIn { from { transform: translateY(40px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* ---------- 12. Toast Notifications ----------------------------------- */
.toast {
  position: fixed; top: 20px; right: 20px;
  background-color: #333; color: white;
  padding: 12px 20px; border-radius: var(--radius);
  z-index: 1000; box-shadow: var(--shadow-sm);
}
.toast.success { background-color: #28a745; }
.toast.error { background-color: #dc3545; }


/* =================== 13. Modal Dialogs Fix =================== */
.modal {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal.hidden {
  display: none !important;
}

.modal-content {
  background: white;
  padding: 24px;
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  max-width: 400px;
  width: 90%;
  text-align: center;
}

.modal-footer {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
}

.modal-actions {
  display: flex;
  flex-direction: row;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
  align-items: center;
}


/* ---------- 14. Playlist Management Styles --------------------------- */

/* Hidden Color Input (used in add & update forms) */
.hidden-color-input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
  border: none;
}

/* Playlist Badge Count (image count) */
.badge {
  background: var(--brand-bg-end, #2d6cdf);
  color: #fff;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 0.7rem;
  margin-left: 6px;
}


/* Thumbnail Strip (image previews inside expanded playlist) */
.thumb-strip {
  display: flex;
  gap: 8px;
  padding: 8px 4px;
  overflow-x: auto;
  border-top: 1px solid #ddd;
  margin-top: 4px;
}

/* Thumbnail Controls (bottom corners) */
.thumb-controls {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  padding: 6px;
  height: 100%;
}

/* === Thumbnail Controls (hover-reveal) === */
.thumb-item {
  position: relative;
  flex: 0 0 250px;
}
.thumb-item:hover .remove-thumb,
.thumb-item:hover .drag-handle {
  opacity: 1;
}

.thumb-item img {
  width: 250px;
  height: auto;
  object-fit: cover;
  display: block;
}

/* === Drag Handle === */
.drag-handle {
  position: absolute;
  top: 4px;
  left: 4px;
  width: 24px;
  height: 24px;
  opacity: 0.7;
  cursor: grab;
  transition: opacity 0.2s ease;
}

/* === Remove Button === */
.remove-thumb {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 24px;
  height: 24px;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  opacity: 0.8;
  transition: opacity 0.2s ease;
}
.remove-thumb img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
  width: 24px;
  height: 24px;
  display: block;
}

.remove-thumb svg {
  width: 12px;
  height: 12px;
  stroke-width: 2;
}

.remove-icon {
  width: 14px !important;
  height: 14px !important;
  max-width: 14px !important;
  max-height: 14px !important;
}



/* Playlist Card/Grid View */
.playlist-card {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  border-radius: 8px;
}

.playlist-grid {
  display: flex;
  flex-direction: column;
  gap: 24px;
  width: 100%;
}


.playlist-accordion {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
  gap: 24px;
}


/* ---------- 15. Icon Buttons ----------------------------------------- */
.icon-btn {
  /* transparent clickable square */
  background: none;
  border: none;
  padding: 6px;            /* keeps a 32–36 px hit-area */
  line-height: 0;          /* avoids extra vertical space */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius);
  transition: background 0.15s ease;
}

/* optional hover / focus ring (subtle) */
.icon-btn:hover,
.icon-btn:focus-visible {
  background: rgba(0,0,0,0.05);
}

/* all inline SVGs inside .icon-btn inherit these */
.icon-btn svg {
  width: 18px;
  height: 18px;
  stroke-width: 1.5;       /* slightly bolder than Lucide default */
  stroke: #555;            /* neutral gray */
  fill: none;
  pointer-events: none;    /* keeps click on the button element */
}

/* special color for destructive actions */
.icon-btn.delete-btn svg {
  stroke: #dc3545;         /* same red as .btn-danger */
}

/* pause-to-play toggle (optional: swap color on active state) */
.icon-btn.active svg {
  stroke: var(--brand-bg-end, #1f4ea8);
}
/* ---------- Lucide SVG Icons ---------------------------------------- */
.icon-svg {
  width: 22px;
  height: 22px;
  stroke: #444; /* dark-ish gray */
  fill: none;
  stroke-width: 2;
}


/* =================== Content Page Styles =================== */

/* Content Card Layout */
.content-card {
  display: flex;
  gap: 16px;
  padding: 20px;
  margin: 20px 0;
  background: white;
  border-radius: 10px;
  box-shadow: var(--shadow-sm);
  align-items: flex-start;
}

/* Thumbnail Styling */
.content-thumb {
  width: 160px;
  height: 90px;
  object-fit: cover;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Card Details Section */
.card-details {
  flex: 1;
}

/* Playlist Display Pills */
.assigned-playlists {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

/* Collapsible Edit Form */
.content-edit-form {
  margin-top: 14px;
  padding-top: 12px;
  border-top: 1px dashed #ccc;
  display: none;
}
.content-edit-form.active {
  display: block;
}

/* Date Info Summary Row */
.card-summary {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  color: #555;
}

/* Calendar Icon */
.icon-calendar {
  width: 16px;
  height: 16px;
  stroke: #666;
  stroke-width: 1.5;
}


/* =================== 16. Content Card Media Preview =================== */

.thumb-preview {
  flex-shrink: 0;
  width: 250px;
  aspect-ratio: 16 / 9;
  border-radius: 6px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.thumb-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* =================== 17. Content Card Enhancements =================== */

/* Ensure card width is wider for image + form layout */
.card {
  max-width: 1100px;
}

/* Make content-card relative for button positioning */
.content-card {
  position: relative;
}

/* Action buttons pinned to top-right */
.card-actions {
  display: flex;
  gap: 12px;
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 5;
}

/* Hide edit form by default */
.edit-form {
  display: none;
}

/* Show edit form when active */
.edit-form.show {
  display: block;
}

/* Playlist pills display */
.assigned-playlists {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

/* Disabled icon buttons */
.icon-btn[disabled] {
  opacity: 0.4;
  pointer-events: none;
}

/* Save button disabled appearance */
.icon-btn.save-btn[disabled] svg {
  stroke: #aaa;
  opacity: 0.4;
}

/* Show card actions only when in editing mode */
.content-card:not(.editing) .card-actions {
  display: none;
}

/* =================== 18. Summary/Edit Mode Toggle Styles =================== */

/* Hide edit-mode by default, show only when toggled */
.edit-mode {
  display: none;
}

.edit-mode.show {
  display: block;
}

.summary-mode.show {
  display: block;
}

.summary-mode.hidden {
  display: none;
}

.edit-mode.hidden {
  display: none;
}

/* =================== 19. Summary Header Layout =================== */

.summary-header {
  display: flex;
  flex-direction: column;
  gap: 4px;
  cursor: pointer;
}

.summary-header .file-name {
  font-weight: 600;
  font-size: 1rem;
  color: #222;
}

.summary-header .date-range {
  font-size: 0.85rem;
  color: #666;
  display: flex;
  align-items: center;
  gap: 6px;
}

.playlist-summary {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

/* =================== 20. Edit Header with Action Buttons =================== */

.edit-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  margin-bottom: 12px;
}

.icon-actions {
  display: flex;
  gap: 10px;
}

/* =================== 21. Form Grid for Dates =================== */

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  margin-bottom: 12px;
}

/* =================== 23. JS-Controlled .editing Class =================== */

/* Hide action buttons unless card has editing class */
.content-card:not(.editing) .icon-actions {
  display: none;
}

.content-card.editing .summary-mode {
  display: none;
}
.content-card.editing .edit-mode {
  display: block;
}

/* ================== 24. Playlist Preview Pane =========================== */
.preview-pane {
  position: fixed;
  top: 80px;
  right: 20px;
  width: 360px;
  height: 400px;
  z-index: 999;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 16px;
  overflow: hidden;
}

.card-style {
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  padding: 16px;
}

.with-preview-offset {
  margin-right: 400px;
}

/* ========== Carousel & Drag Support ========== */

.thumb-carousel-wrapper {
  position: relative;
  overflow-x: auto;
  padding: 8px 0;
  width: 100%;
  max-width: 100%;
}

.thumb-carousel-wrapper {
  position: relative;
  overflow-x: hidden;
  padding: 8px 48px;
  margin: 0 -40px; /* let chevrons sit flush left/right */
}

.thumb-carousel {
  display: flex;
  flex-wrap: nowrap;
  gap: 24px;
  overflow-x: auto;
  scroll-behavior: smooth;
  max-width: calc(250px * 3 + 24px * 2); /* 3 thumbnails + 2 gaps */
  padding-inline: 48px;
}

.carousel-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 2;
  width: 36px;
  height: 36px;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  padding: 6px;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
}

.carousel-nav img {
  width: 28px;
  height: 28px;
}

.carousel-nav.left {
  left: 0;
}

.carousel-nav.right {
  right: 0;
}



/* Sortable visual feedback */
.sortable-ghost {
  opacity: 0.5;
  transform: scale(0.98);
}
.sortable-chosen {
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
  transform: scale(1.02);
}

/* ---------- 25. User Profile Page Styles -------------------------------- */

.card-profile {
  max-width: 960px;
  margin-left: 24px;
  margin-bottom: 32px;
  padding: 24px;
  background: #fff;
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
}

.card-profile-info {
  display: flex;
  align-items: center;
  gap: 20px;
}

.avatar-lg {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #ccc;
}

.profile-meta h2 {
  margin: 0;
  font-size: 1.5em;
}

.profile-meta p {
  margin: 4px 0;
}

.account-links {
  list-style: none;
  padding: 0;
  margin: 16px 0 0;
}

.account-links li {
  margin-bottom: 10px;
}

.btn-link {
  color: #333;
  text-decoration: none;
  font-weight: bold;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  font-size: 1em;
}

.btn-link:hover {
  text-decoration: underline;
}
